# 4ì¥-íƒ€ì… í™•ì¥í•˜ê¸° ì¢íˆê¸°

## 4.1 íƒ€ì… í™•ì¥í•˜ê¸°

- íƒ€ì… í™•ì¥í•˜ê¸° : íƒ€ì…ì„ ë” êµ¬ì²´ì ìœ¼ë¡œ ì •ì˜í•˜ëŠ” ê²ƒ

### 4.1.1 íƒ€ì… í™•ì¥ì˜ ì¥ì 

- ì¤‘ë³µ ì½”ë“œ ì¤„ì´ê¸°.
- ê¸°ì¡´ì— ì‘ì„± íƒ€ì…ì„ ë°”íƒ•ìœ¼ë¡œ í™•ì¥í•œë‹¤.

```ts
/**
 * ë©”ë‰´ ìš”ì†Œ íƒ€ì…
 * ë©”ë‰´ ì´ë¦„, ì´ë¯¸ì§€, í• ì¸ìœ¨, ì¬ê³  ì •ë³´
 * */
interface BaseMenuItem {
    name: string;
    imageUrl: string | null;
    discountAmount: number;
    stock: number | null;
}

/**
 * ì¥ë°”êµ¬ë‹ˆ ìš”ì†Œ íƒ€ì…
 * ë©”ë‰´ íƒ€ì…ì— ìˆ˜ëŸ‰ ì •ë³´ ì¶”ê°€
 * */
interface CartItem extends BaseMenuItem {
    quantity: number;
}

```

- ì¤‘ë³µ ì œê±°, ëª…ì‹œì ì¸ ì½”ë“œ ì‘ì„±, í™•ì¥ì„±

### 4.1.2 ìœ ë‹ˆì˜¨ íƒ€ì…

- 2ê°œ ì´ìƒì˜ íƒ€ì…ì„ ì¡°í•©í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
- í•©ì§‘í•©
- í˜•íƒœ: `A | B`

```ts
type ID = string | number;

function printId(id: ID) {
  // idê°€ stringì¸ì§€ numberì¸ì§€ì— ë”°ë¼ ì²˜ë¦¬
  if (typeof id === 'string') {
    console.log(id.toUpperCase());
  } else {
    console.log(id.toFixed(2));
  }
}

```

### 4.1.3 êµì°¨ íƒ€ì…

- ì—¬ëŸ¬ íƒ€ì…ì„ ëª¨ë‘ ë§Œì¡±í•˜ëŠ” íƒ€ì…
- êµì§‘í•©
- í˜•íƒœ: `A & B`

```ts
interface WithTimestamp {
  createdAt: Date;
}
interface WithUser {
  userId: string;
}

// ìƒì„± ì‹œê°ê³¼ ì‚¬ìš©ì ì •ë³´ê°€ ëª¨ë‘ í•„ìš”í•  ë•Œ
type AuditRecord = WithTimestamp & WithUser;

const record: AuditRecord = {
  createdAt: new Date(),
  userId: 'alice123'
};

```

### 4.1.4 extendsì™€ êµì°¨ íƒ€ì…

í™•ì¥ê³¼ ì¡°í•©ì„ í†µí•´ ìœ ì—°í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ íƒ€ì…ì„ ì„¤ê³„ ê°€ëŠ¥.

- extends í‚¤ì›Œë“œë¥¼ í™œìš©í•´ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥ 
- êµì°¨ íƒ€ì…(&)ì„ ì´ìš©í•´ ì—¬ëŸ¬ íƒ€ì…ì„ í•©ì³ í™•ì¥

ğŸ§ ë‘ ê°€ì§€ ë°©ì‹ì˜ ì°¨ì´ì 
> - `extends`ëŠ” ì¸í„°í˜ì´ìŠ¤ ìƒì†, ì„ ì–¸ ë³‘í•©(declaration merging)ì´ ê°€ëŠ¥
> - `&` ëŠ” ëª¨ë“  íƒ€ì…(ì¸í„°í˜ì´ìŠ¤Â·ìœ ë‹ˆì˜¨Â·ê¸°íƒ€ íƒ€ì…)ì— ì ìš© ê°€ëŠ¥
> 

```ts

// ì¸í„°í˜ì´ìŠ¤ ìƒì†: ì„ ì–¸ ë³‘í•© ê°€ëŠ¥
interface A { a: string }
interface B extends A { b: number }
interface A { c: boolean }  // Aê°€ ì„ ì–¸ ë³‘í•©ë˜ì–´ { a, c }ë¥¼ ê°–ê²Œ ë¨

// íƒ€ì… ë³„ì¹­ êµì°¨: ê¸°ì¡´ íƒ€ì… ë³€ê²½ ë¶ˆê°€
type C = { x: number } & { y: number };
// type C = { x: number; y: number }

```
## 4.2 íƒ€ì… ì¢íˆê¸° - íƒ€ì… ê°€ë“œ

- ëŸ°íƒ€ì„ì—ì„œ ê°’ì˜ íƒ€ì…ì„ ì¢íˆê¸° ìœ„í•œ ë¬¸ë²•
- ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì¡°ê±´ë¬¸ê³¼ ê²°í•©í•˜ì—¬ íŠ¹ì • íƒ€ì…ì„ì„ ë³´ì¥
- ì‚¬ìš©ì ì •ì˜ íƒ€ì… ê°€ë“œ: í•¨ìˆ˜ ë°˜í™˜í˜•ì— `a is T` í˜•ì‹ìœ¼ë¡œ íƒ€ì… íŒë³„ í•¨ìˆ˜ ì‘ì„± ê°€ëŠ¥
- íƒ€ì… ì•ˆì „ì„± ê°•í™”ì— ê¸°ì—¬

ğŸ“Œ ë‚´ì¥ ê°€ë“œ
- `typeof value === 'string'`
- `value instanceof Date`
- `'prop' in obj`

ğŸ“Œ ì‚¬ìš©ì ì •ì˜ íƒ€ì… ê°€ë“œ
```ts
interface Success { success: true; data: any }
interface Failure { success: false; error: string }
type Result = Success | Failure;

function isSuccess(r: Result): r is Success {
  return r.success === true;
}

function handle(r: Result) {
  if (isSuccess(r)) {
    // ì—¬ê¸°ëŠ” Success íƒ€ì…
    console.log(r.data);
  } else {
    // Failure íƒ€ì…
    console.error(r.error);
  }
}

```

## 4.3 íƒ€ì… ì¢íˆê¸° - ì‹ë³„í•  ìˆ˜ ìˆëŠ” ìœ ë‹ˆì˜¨(Discriminated Union)

- ê³µí†µ í”„ë¡œí¼í‹°(íŒë³„ì)ë¥¼ ë‘ê³ , ê·¸ ê°’ìœ¼ë¡œ íƒ€ì…ì„ êµ¬ë¶„í•˜ëŠ” íŒ¨í„´

### 4.3.1 ì—ëŸ¬ ì •ì˜í•˜ê¸°

- ë‹¤ì–‘í•œ ì—ëŸ¬ íƒ€ì…ì„ ì‹ë³„í•˜ê¸° ìœ„í•œ ìœ ë‹ˆì˜¨ íƒ€ì… ì„¤ê³„
- ex)  ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬, ì„œë²„ ì—ëŸ¬, í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬ë¥¼ ê°ê¸° ë‹¤ë¥¸ íƒ€ì…ìœ¼ë¡œ ì •ì˜

```ts
// ê³µí†µ íŒë³„ì â€˜typeâ€™ ì‚¬ìš©
interface NotFoundError {
  type: 'NotFound';
  message: string;
}
interface ValidationError {
  type: 'Validation';
  field: string;
  issue: string;
}
interface UnknownError {
  type: 'Unknown';
  reason: string;
}

type AppError = NotFoundError | ValidationError | UnknownError;
// typeì´ 'NotFound' | 'Validation' | 'Unknown' ì¼ ìˆ˜ ìˆìŒ. ì´ ì¤‘ì—ì„œ íƒ€ì… ê°€ë“œ í™œìš©í•´ì„œ ì¢íˆê¸°
```

### 4.3.2 ì‹ë³„í•  ìˆ˜ ìˆëŠ” ìœ ë‹ˆì˜¨

- ì‹ë³„ì(type ë“±)ë¥¼ í¬í•¨í•œ ìœ ë‹ˆì˜¨ íƒ€ì…
- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì¡°ê±´ë¬¸ìœ¼ë¡œ ì‹ë³„ìë¥¼ ì²´í¬í•˜ë©´ ë‚´ë¶€ íƒ€ì…ì„ ì¢í˜

```ts
function handleError(err: AppError) {
  switch (err.type) {
    case 'NotFound':
      console.log(`ë¦¬ì†ŒìŠ¤ ì—†ìŒ: ${err.message}`);
      break;
    case 'Validation':
      console.log(`ê²€ì¦ ì‹¤íŒ¨: ${err.field} â€“ ${err.issue}`);
      break;
    case 'Unknown':
      console.log(`ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜: ${err.reason}`);
      break;
  }
}

```

### 4.3.3 ì‹ë³„í•  ìˆ˜ ìˆëŠ” ìœ ë‹ˆì˜¨ì˜ íŒë³„ì ì„ ì •

- íŒë³„ì í‚¤(key): ëª¨ë“  ë©¤ë²„ì— ê³µí†µìœ¼ë¡œ ìˆì–´ì•¼ í•¨
- ë¦¬í„°ëŸ´ ê°’(value): ê° ë©¤ë²„ë§ˆë‹¤ ìœ ì¼í•´ì•¼ í•¨
- ë³´í†µ `type`, `kind`, `tag` ê°™ì€ ì´ë¦„ì„ ì‚¬ìš©

## 4.4 Exhaustiveness Checking ìœ¼ë¡œ ì •í•œ íƒ•ì… ë¶„ê¸° ìœ ì§€í•˜ê¸°

- ëª©ì : ìƒˆë¡œìš´ ìœ ë‹ˆì˜¨ ë©¤ë²„ ì¶”ê°€ ì‹œ ë¶„ê¸° ì²˜ë¦¬ë¥¼ ë†“ì¹˜ì§€ ì•Šë„ë¡ ì»´íŒŒì¼ íƒ€ì„ì—ì„œ ê²€ì¦
- íŒ¨í„´: `never` íƒ€ì…ì„ í™œìš©í•œ â€œì™„ì „ ë¶„ê¸° ê²€ì‚¬â€

```ts
function assertNever(x: never): never {
  throw new Error(`ì²˜ë¦¬ë˜ì§€ ì•Šì€ ë¶„ê¸°: ${JSON.stringify(x)}`);
}

function handleErrorExhaustive(err: AppError) {
  switch (err.type) {
    case 'NotFound':
      return /*â€¦*/;
    case 'Validation':
      return /*â€¦*/;
    case 'Unknown':
      return /*â€¦*/;
    default:
      // errê°€ neverì—¬ì•¼ë§Œ ì»´íŒŒì¼ ì„±ê³µ
      return assertNever(err);
  }
}

```
- default ë¸”ë¡ì—ì„œ `err`ê°€ `never`ê°€ ì•„ë‹ˆë©´ ì»´íŒŒì¼ ì˜¤ë¥˜ ë°œìƒ
  â†’ ëª¨ë“  ì¼€ì´ìŠ¤ë¥¼ ë°˜ë“œì‹œ ì²˜ë¦¬í–ˆìŒì„ ë³´ì¥í•œë‹¤.