# 10ì¥ ìƒíƒœ ê´€ë¦¬

## 10.1 ìƒíƒœê´€ë¦¬

### 1. ìƒíƒœë€

ì‹œê°„ì´ ì§€ë‚˜ë©´ ë³€í•˜ëŠ” ë™ì ì¸ ë°ì´í„° (ê³ ì • ê°’ì´ ì•„ë‹˜)

#### local state

- ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ê´€ë¦¬ ë˜ëŠ” ë°ì´í„°
- `useState`, `useReducer` ì‚¬ìš©
- ex. ì²´í¬ë°•ìŠ¤ ì—¬ë¶€, í¼ì˜ ì…ë ¥ê°’

#### global state

- ì•± ì „ì²´ì—ì„œ ê³µìœ í•˜ëŠ” ë°ì´í„°
- `props drilling` ë¬¸ì œë¥¼ í”¼í•˜ê¸° ìœ„í•œ ëŒ€ì²´ì œ

#### server state

- ì™¸ë¶€ì—ì„œ ì €ì¥í•´ì•¼ í•˜ëŠ” ë°ì´í„°
- `react-query`, `swr` ê°™ì€ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì´ìš©
- ex. ì‚¬ìš©ì ì •ë³´, ê¸€ ëª©ë¡


### 2. ìƒíƒœë¥¼ ì˜ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê°€ì´ë“œ

- ìƒíƒœê°€ ë§ì„ ìˆ˜ë¡ ë¦¬ë Œë”ë§ì´ ë§ì´ ë¨ -> ì„±ëŠ¥ì— ì˜í–¥ì´ ê°
- ë”°ë¼ì„œ, ê°€ëŠ¥í•œ Stateless Componentë¥¼ ë§Œë“œëŠ”ê²Œ ì¢‹ìŒ

#### ğŸ Check Point

1ï¸âƒ£ ì‹œê°„ì´ ì§€ë‚˜ë„ ë³€í•˜ì§€ ì•ŠëŠ” ê°’ì¸ê°€? 

- ê°ì²´ì˜ ì°¸ì¡° ë™ì¼ì„± ìœ ì§€í•´ì„œ ë³€ê²½ë˜ì§€ ì•Šì€ ê°’ì„ì„ ë¦¬ì•¡íŠ¸ê°€ ì¸ì‹í•˜ê²Œ í•˜ëŠ” ê²ƒ

- `useState`ì˜ ì´ˆê¸°ê°’ë§Œ ì§€ì •í•œë‹¤.

- `useRef`ë¥¼ ì‚¬ìš©í•œë‹¤.
    - useRefëŠ” ë§¤ ë Œë”ë§ ë§ˆë‹¤ ë™ì¼í•œ ref ê°ì²´ë¥¼ ì œê³µí•œë‹¤.

2ï¸âƒ£ íŒŒìƒëœ ê°’ì¸ê°€?

- ë¶€ëª¨ì—ê²Œì„œ ì „ë‹¬ë°›ëŠ” propsì´ê±°ë‚˜ ê¸°ì¡´ ìƒíƒœì—ì„œ ê³„ì‚°ë  ìˆ˜ ìˆëŠ” ê°’ì€ ìƒíƒœê°€ ì•„ë‹ˆë‹¤.

- ë¶€ëª¨ì—ì„œ ì „ë‹¬ë°›ì€ propsë¥¼ ìƒíƒœë¡œ ê´€ë¦¬í•˜ê²Œ ë  ê²½ìš°, ë™ì¼ ì¶œì²˜ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ì¶œì²˜ì—ì„œ ë°ì´í„° ê°±ì‹ ì´ ë°œìƒí•˜ê²Œ ë¨
  - ë”°ë¼ì„œ, ë°ì´í„°ì˜ ì •í™•ì„±ê³¼ ì¼ê´€ì„±ì„ ë³´ì¥í•˜ê¸° ì–´ë ¤ì›€.


```tsx
import { useState } from 'react';

type UserEmailProps = {
    initialEmail: string;
}

const UserEmail: React.VFC<UesrEmailProps> = ({ initialEmail }) => {
    const [email, setEmail] = useState(initialEmail);

    const onChangeEmail = (event: React.ChagneEvent<HTMlInputElement>) => {
        setEmail(event.target.value);
    };

    return (
        <div>
            <input type="text" value={email} onChagne={onChangeEmail}>
        </div>
    )
}

```

> ğŸ’¡ ë°ì´í„° ìƒíƒœë¥¼ ë™ê¸°í™” í•˜ê¸° ìœ„í•´ `useEffect`ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?
>
> `useEffect`ë¥¼ ì‚¬ìš©í•œ ë™ê¸°í™” ì‘ì—…ì€ ì™¸ë¶€ ë°ì´í„° (ì˜ˆ: `localStorage`)ì™€ ë™ê¸°í™” ë  ë•Œë§Œ ì‚¬ìš©í•´ì•¼ í•¨.
> ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” ë°ì´í„° ìƒíƒœë¥¼ ë™ê¸°í™” í•˜ëŠ” ê²½ìš°, ê°œë°œìê°€ ì¶”ì í•˜ê¸° ì–´ë ¤ìš´ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ

-> **ìƒíƒœ ëŒì–´ì˜¬ë¦¬ê¸°(Lifting Statg Up)** ê¸°ë²• 

```tsx
import React from 'react';

type UserEmailProps = {
    email: string;
    setEmail: React.Dispatch<React.SetStateAction<string>>;
};

export const UserEmail: React.FC<UserEmailProps> = ({ email, setEmail }) => {
    const onChangeEmail = (event: React.ChangeEvent<HTMLInputElement>) => {
        setEmail(event.target.value);
    };

    return (
        <div>
            <input type="text" value={email} onChange={onChangeEmail} />
        </div>
    );
};

```
- ë‹¨ì¼í•œ ì¶œì²˜ì—ì„œ ë°ì´í„°ê°€ ë³€ê²½ë˜ë„ë¡ í•œë‹¤.

#### `useState` vs `useReducer`

`useReducer`ëŠ” ì–¸ì œ ì“¸ê¹Œ?
- ë‹¤ìˆ˜ì˜ í•˜ìœ„ í•„ë“œë¥¼ í¬í•¨í•œ ë³µì¡í•œ ìƒíƒœ ë¡œì§ì„ ë‹¤ë£° ë•Œ
- ë‹¤ìŒ ìƒíƒœê°€ ì´ì „ ìƒíƒœì— ì˜ì¡´ì ì¼ ë•Œ
- useReducerëŠ” 'ë¬´ì—‡ì„ ë³€ê²½í• ì§€'ì™€ 'ì–´ë–»ê²Œ ë³€ê²½í• ì§€'ë¥¼ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤.
    - `dispatch` : ì–´ë–¤ ì‘ì—…ì„ í•  ì§€ `action`ìœ¼ë¡œ ë„˜ê¹€
    - `reducer` : í•¨ìˆ˜ ë‚´ì—ì„œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ë°©ì‹ ì •ì˜

```ts
import React, { useReducer } from 'react';

// Action ì •ì˜
type Action =
| { payload: ReviewFilter; type: 'filter'; }
| { payload: number; type: 'navigate'; }
| { payload: number; type: 'resize'; };
// Reducer ì •ì˜
const reducer: React.Reducer<State, Action> = (state, action) => {
  switch (action.type) {
    case 'filter':
      return {
        filter: action.payload,
        page: 0,
        size: state.size,
      };
    case 'navigate':
      return {
        filter: state.filter,
        page: action.payload,
        size: state.size,
      };
    case 'resize':
      return {
        filter: state.filter,
        page: 0,
        size: action.payload,
      };
    default:
      return state;
    }
};

// useReducer ì‚¬ìš©
const [state, dispatch] = useReducer(reducer, getDefaultState());
// dispatch ì˜ˆì‹œ
dispatch({ payload: filter, type: 'filter' });
dispatch({ payload: page, type: 'navigate' });
dispatch({ payload: size, type: 'resize' });

```

### 3. ì „ì—­ ìƒíƒœ ê´€ë¦¬ì™€ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

ìƒíƒœëŠ” ì‚¬ìš©í•˜ëŠ” ê³³ê³¼ ìµœëŒ€í•œ ê°€ê¹ê²Œ ë‘¬ì•¼ í•˜ê³ , ì‚¬ìš© ë²”ìœ„ë¥¼ ì œí•œí•´ì•¼ í•œë‹¤.

ì–´ë–¤ ìƒíƒœë¥¼ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ì™€ ê³µìœ í•˜ê²Œ ë  ê²½ìš° ì „ì—­ ìƒíƒœë¥¼ ì‚¬ìš©í•œë‹¤.

ì „ì—­ ìƒíƒœë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€
- context APIë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ê³¼
- ì™¸ë¶€ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.

### Context API

ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë“¤ê³¼ ë°ì´í„° ê³µìœ ë¥¼ ì‰½ê²Œ ê³µìœ í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§

ì „ì—­ì ìœ¼ë¡œ ê³µìœ í•˜ëŠ” ë°ì´í„°ë¥¼ ì»¨í…ìŠ¤íŠ¸ë¡œ ì œê³µí•˜ê³ ,
ê·¸ ì»¨í…ìŠ¤íŠ¸ë¥¼ êµ¬ë…í•œ ì»´í¬ë„ŒíŠ¸ëŠ” ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ë°ì´í„°ë¥¼ ììœ ë¡­ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ex. ë¡œì¼€ì¼ ë°ì´í„°, ui í…Œë§ˆ

## 10.2 ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

### âœ… ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹„êµ ìš”ì•½

| ë¼ì´ë¸ŒëŸ¬ë¦¬ | íŠ¹ì§•                        | ì¥ì                                              | ë‹¨ì                                                |
|------------|-----------------------------|--------------------------------------------------|----------------------------------------------------|
| Redux      | í•¨ìˆ˜í˜•, ì „ì—­ ìƒíƒœ ê´€ë¦¬      | ì˜ˆì¸¡ ê°€ëŠ¥, ë¯¸ë“¤ì›¨ì–´ ì§€ì›, í’ë¶€í•œ ìƒíƒœê³„           | ëŸ¬ë‹ì»¤ë¸Œ ìˆìŒ, ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸(ì„¤ì • ì½”ë“œ) ë§ìŒ       |
| MobX       | ê´€ì°°ì íŒ¨í„´, ê°ì²´ì§€í–¥ì      | ì‚¬ìš©ë²• ì§ê´€ì , ì½”ë“œ ê°„ê²°, ë¹ ë¥¸ ê°œë°œ               | ë°ì´í„° íë¦„ ì¶”ì  ì–´ë ¤ì›€, ë¶ˆíˆ¬ëª…í•œ ìƒíƒœ ê´€ë¦¬         |
| Recoil     | atom/selector ê¸°ë°˜, ìµœì‹     | ë¦¬ì•¡íŠ¸ ì¹œí™”ì , ì„¸ë°€í•œ ìƒíƒœê´€ë¦¬, ë¹„êµì  ì‰¬ìš´ ì‚¬ìš©  | ìƒíƒœê³„ê°€ ìƒëŒ€ì ìœ¼ë¡œ ì‘ìŒ, ì¼ë¶€ ì œí•œ ì‚¬í•­ ì¡´ì¬        |
| Zustand    | Hook ê¸°ë°˜, ê²½ëŸ‰             | ë§¤ìš° ê°€ë³ê³  ê°„ë‹¨, ìµœì†Œ ì„¤ì •, ì‰¬ìš´ ë„ì…            | ëŒ€ê·œëª¨/ë³µì¡í•œ í”„ë¡œì íŠ¸ì—ëŠ” ê¸°ëŠ¥ì´ ì œí•œì ì¼ ìˆ˜ ìˆìŒ  |