# 3ì¥ ê³ ê¸‰ íƒ€ì…

## 3.1 íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë§Œì˜ ë…ìì  íƒ€ì… ì‹œìŠ¤í…œ

<img src="../assets/3/type_system.png" alt="3-1" width="500" />

### 3.1.1 any íƒ€ì…

- ìë°”ìŠ¤í¬ë¦½íŠ¸ì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  ê°’ì„ ì˜¤ë¥˜ ì—†ì´ ë°›ìŒ.
- íƒ€ì… ëª…ì‹œí•˜ì§€ ì•Šì€ ê²ƒê³¼ ë™ì¼í•œ íš¨ê³¼.
- ë™ì  íƒ€ì´í•‘ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•œ ê²°ê³¼
- ì§€ì–‘í•´ì•¼í•  ìŠµê´€!

```ts
let state: any;

state = { value: 5 };
state = 100;
state = "hello world";
state.foo.bar = () => console.log("hello world");
```

- ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ì–´ì©” ìˆ˜ ì—†ì´ ì‚¬ìš©í•´ì•¼ í•  ë•Œ
  - ê°œë°œ ë‹¨ê³„ì—ì„œ ì„ì‹œë¡œ ê°’ì„ ì§€ì •í•´ì•¼ í•  ë•Œ
  - ì–´ë–¤ ê°’ì„ ë°›ì•„ì˜¬ì§€ ë˜ëŠ” ë„˜ê²¨ì¤„ì§€ ì •í•  ìˆ˜ ì—†ì„ ë•Œ

    ```ts
    type FeedbackModalParams = {
      show: boolean;
      content: string;
      cancelButtonText?: string;
      confirmButtonText?: string;
      beforeOnClose?: () => void;
      action?: any; // ëª¨ë‹¬ì°½ì„ ê·¸ë¦´ ë•Œ ì‹¤í–‰ë  í•¨ìˆ˜
    }
    ```

  - ê°’ì„ ì—ì¸¡í•  ìˆ˜ ì—†ì„ ë•Œ ì•”ë¬µì  ì‚¬ìš©

    ```ts
    async function load() {
      const response = await fetch("https://api.example.com/data");
      const data = await response.json(); // Promise<any>ë¡œ íƒ€ì… ì¶”ë¡ ë¨
      return data;
    }
    ```

### 3.1.2 unknown íƒ€ì…

- `any`ë³´ë‹¤ ì•ˆì „í•œ íƒ€ì…. ì‹¤ì œ ì‚¬ìš© ì „ì—ëŠ” íƒ€ì… í™•ì¸ì´ í•„ìš”.
- `any` íƒ€ì… ì™¸ì— ë‹¤ë¥¸ íƒ€ì…ìœ¼ë¡œ í• ë‹¹ ë¶ˆê°€ëŠ¥.
- ëŸ°íƒ€ì„ì— íƒ€ì… ì¶”ë¡ ì´ ì•ˆë˜ë©´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚´.
- íƒ€ì… ê²€ì‚¬ë¥¼ ê°•ì œí•˜ê³  íƒ€ì…ì´ ì‹ë³„ëœ í›„ì— ì‚¬ìš©í•  ìˆ˜ ìˆìŒ.

```ts
let unknownValue: unknown;

unknownValue = 123;
unknownValue = "hello";
unknownValue = () => console.log("hello world");
// any íƒ€ì…ê³¼ ë¹„ìŠ·í•˜ê²Œ ìˆ«ìë“ , ë¬¸ìë“ , í•¨ìˆ˜ë“  ë‹¤ í• ë‹¹ ê°€ëŠ¥í•˜ì§€ë§Œ

let someValue: any = unknownValue; // â­• any íƒ€ì…ìœ¼ë¡œ ì„ ì–¸ëœ ë³€ìˆ˜ëŠ” í• ë‹¹ ê°€ëŠ¥
let someValue2: number = unknownValue; // âŒ 
let someValue3: string = unknownValue; // âŒ
let someValue4: () => void = unknownValue; // âŒ

```

### 3.1.3 void íƒ€ì…

- í•¨ìˆ˜ì—ì„œ ë°˜í™˜ê°’ì´ ì—†ì„ ë•Œ ì‚¬ìš©.

```ts
function log(message: string): void {
  console.log(message);
}
```

### 3.1.4 never íƒ€ì…

- ì ˆëŒ€ ë°˜í™˜ë˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ì— ì‚¬ìš©. ì£¼ë¡œ ì—ëŸ¬ ë˜ì§€ê¸°ë‚˜ ë¬´í•œ ë£¨í”„ì— ì‚¬ìš©.
- ëª¨ë“  íƒ€ì…ì˜ í•˜ìœ„ íƒ€ì…

```ts
function fail(): never {
  throw new Error("ì˜ˆì™¸ ë°œìƒ");
}

function checkStatus(): never {
  while (true) {}
}
```

### 3.1.5 Array íƒ€ì…

- ê¸°ë³¸ ë°°ì—´ íƒ€ì… ì„ ì–¸: string[], Array<number> ë‘ ê°€ì§€ ë°©ì‹ ê°€ëŠ¥.

```ts
let names: string[] = ["Alice", "Bob"];
let nums: Array<number> = [1, 2, 3];
```

- ìœ ë‹ˆì˜¨ íƒ€ì… í™œìš©í•´ì„œ ë‹¤ì–‘í•œ ìë£Œí˜• ë‹¤ë£¨ê¸°

```ts
let values: (string | number)[] = [1, "hello"];
```

- íŠœí”Œ íƒ€ì… í™œìš©í•´ì„œ ë°°ì—´ì˜ ê¸¸ì´ ì œí•œ ì¶”ê°€í•˜ê¸°

```ts
let tuple: [number]= [1];
tuple = [1, 2] // âŒ 
tuple = [1, "string"] // âŒ
let tuple: [string, number] = ["hello", 123];
```

- ë°°ì—´ì€ ì‚¬ì „ì— í—ˆìš©í•˜ì§€ ì•Šì€ íƒ€ì…ì´ ì„œë¡œ ì„ì´ëŠ” ê²ƒì„ ë°©ì§€í•˜ì—¬ íƒ€ì… ì•ˆì •ì„±ì„ ì œê³µí•¨.
- íŠœí”Œì€ ê¸¸ì´ê¹Œì§€ ì œí•œí•˜ì—¬ ì›ì†Œ ê°œìˆ˜ì™€ íƒ€ì…ì„ ë³´ì¥í•¨. (ëŒ€í‘œì ì¸ ì˜ˆ : `useState` í›…)

> ğŸ“ ì˜µì…”ë„(Optional)
>
> - ì˜µì…”ë„ íƒ€ì…ì€ ê°’ì´ ìˆì„ ìˆ˜ë„ ìˆê³  ì—†ì„ ìˆ˜ë„ ìˆìŒì„ ë‚˜íƒ€ë‚´ëŠ” íƒ€ì…
> - ì„ íƒì  í”„ë¡œí¼í‹°ë¥¼ í‘œí˜„í•˜ëŠ” ë° ì‚¬ìš©
>
> ```ts
> const optionalTuple: [number, number, number?] = [1,2];
> ```
>

### 3.1.6 enum íƒ€ì…

- ì—´ê±°í˜•
- ì˜ë¯¸ ìˆëŠ” ì´ë¦„ì„ ê°€ì§„ ìƒìˆ˜ ì§‘í•©ì„ ì •ì˜í•  ë•Œ ì‚¬ìš©. (ë¬¸ìì—´ ìƒìˆ˜)
- ì‘ì§‘ë ¥ ìˆëŠ” ì§‘í•© êµ¬ì¡°ì²´

```ts
enum ItemStatusType {
  DELIVERY_HOLD = 'DELIVERY_HOLD',
  DELIVERY_READY = 'DELIVERY_READY',
  DELIVERING = 'DELIVERING',
  DELIVERED = 'DELIVERED'
}

const checkItemAvailable = (itemStatus: ItemStatusType) =>{
  switch(itemStatus){
    case ItemStatusType.DELIVERY_HOLD:
    case ItemStatusType.DELIVERY_READY:
    case ItemStatusType.DELIVERING:
      return false;
    case ItemStatusType.DELIVERED:
      return true;
  }
}
```

- ì¥ì 
  - íƒ€ì… ì•ˆì •ì„±
  - ëª…í™•í•œ ì˜ë¯¸ ì „ë‹¬, ë†’ì€ ì‘ì§‘ë ¥
  - ê°€ë…ì„±

- ë‹¨ì 
  - ìˆ«ìë¡œë§Œ ì´ë£¨ì–´ì§€ê±°ë‚˜, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ ì¶”ë¡ í•œ ì—´ê±°í˜•ì˜ ê²½ìš° ì•ˆì „í•˜ì§€ ì•ŠìŒ.
  - `const enum`ìœ¼ë¡œ ì„ ì–¸í•´ë„, ìˆ«ìí˜• ìƒìˆ˜ë¡œ ê´€ë¦¬ë˜ëŠ” `enum`ì€ ì„ ì–¸ê°’ ì´ì™¸ì˜ ê°’ì„ í• ë‹¹í•´ë„ ì´ë¥¼ ë§‰ì§€ ëª»í•œë‹¤.
  - ë¬¸ìì—´ ìƒìˆ˜ ë°©ì‹ì€ ì¡°ê¸ˆ ë” ì•ˆì „.

```ts
const enum NUMBER {
  ONE = 1,
  TWO = 2,
}

const myNumber: NUMBER = 3; // enumì— ì •ì˜ë˜ì§€ ì•Šì•˜ì§€ë§Œ, ìˆ«ìí˜• enumì€ ì»´íŒŒì¼ ì‹œì ì— ì¸ë¼ì¸ ì²˜ë¦¬ë˜ì–´ íƒ€ì… ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.

const enum STRING = {
  ONE = 'ONE',
  TWO = 'TWO'
}

const myString: STRING = 'THREE'; // Error
```

- ì—´ê±°í˜•ì€ ê°’ ê³µê°„, íƒ€ì… ê³µê°„ì—ì„œ ëª¨ë‘ ì‚¬ìš©ë¨
- ì´ë•Œ ts -> jsë¡œ ë³€í™˜ì‹œ ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜(IIFE) í˜•ì‹ìœ¼ë¡œ ë³€í™˜ë˜ëŠ”ë°
- ì¼ë¶€ ë²ˆë“¤ëŸ¬ì—ì„œ íŠ¸ë¦¬ì‰ì´í‚¹ ê³¼ì • ì¤‘ ì¸ì‹ ëª»í•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•˜ê¸°ë„ í•¨
- ë¶ˆí•„ìš”í•œ ì½”ë“œ í¬ê¸°ê°€ ì¦ê°€í•  ìˆ˜ ìˆìŒ
- ë”°ë¼ì„œ `const enum` ë˜ëŠ” `as const` ë‹¨ì–¸ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¶Œì¥

## 3.2 íƒ€ì… ì¡°í•©

### 3.2.1 êµì°¨ íƒ€ì… (Intersection Type)

- ì—¬ëŸ¬ íƒ€ì…ì„ í•©ì³ì„œ í•˜ë‚˜ì˜ íƒ€ì…ìœ¼ë¡œ ì •ì˜.
- `&` ì—°ì‚°ì ì‚¬ìš©
- A íƒ€ì…ê³¼ B íƒ€ì…ì„ ëª¨ë‘ ë§Œì¡±í•˜ëŠ” ê²½ìš°!

```ts
type ProductItem = {
  id: number;
  name: string;
  type: string;
  price: number;
  imageUrl: string;
  quantity: number;
}

type ProductItemWithDiscount =  ProductItem & { discountAmount: number}
```

### 3.2.2 ìœ ë‹ˆì˜¨ íƒ€ì… (Union Type)

- ë‘˜ ì¤‘ í•˜ë‚˜ì˜ íƒ€ì…ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ.
- `|` ì—°ì‚°ì ì‚¬ìš©
- A íƒ€ì… ë˜ëŠ” B íƒ€ì… ì¤‘ í•˜ë‚˜!

```ts
type CardItem = {
  id: number;
  name: string;
  type: string;
  imageUrl: string;
}

type PromotionEventItem = ProductItem | CardItem; 
// ì´ë²¤íŠ¸ í”„ë¡œëª¨ì…˜ ëŒ€ìƒì€ ìƒí’ˆì¼ ìˆ˜ë„ ìˆê³ , ì¹´ë“œ ì¼ ìˆ˜ë„ ìˆë‹¤.

const printPromotionItem = (item: PromotionEventItem) => {
  console.log(item.name);

  console.log(item.quantity); // ğŸš¨ Compile Error 
  // quantityëŠ” ProductItemì—ë§Œ ì¡´ì¬í•œë‹¤.
  // CardItem íƒ€ì…ë„ itemì´ ë  ìˆ˜ ìˆëŠ”ë°, CardItemì—ëŠ” quantityê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
}
```

### 3.2.3 ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ (Index Signatures)

- ë™ì  í‚¤ë¥¼ ê°–ëŠ” ê°ì²´ íƒ€ì… ì •ì˜.
- `[Key: K]: T` í˜•íƒœ
  - ì˜ë¯¸: ì´ ê°ì²´ì˜ í‚¤ ê°’ì€ ëª¨ë‘ K íƒ€ì…ì´ì–´ì•¼ í•˜ê³ , ì†ì„± ê°’(value)ì€ T íƒ€ì…ì´ì–´ì•¼ í•œë‹¤.

```ts
interface Dictionary {
  [key: string]: string;
}

const dict: Dictionary = {
  hello: "ì•ˆë…•",
  world: "ì„¸ê³„"
};
```

```ts
interface Person {
  [key: string]: number | boolean;
  length: number;
  isValid: boolean;
  name: string; // âŒ Error : Property 'name' of type 'string' is not assignable to 'string' index type 'number | boolean'.
}
```

### 3.2.4 ì¸ë±ìŠ¤ë“œ ì—‘ì„¸ìŠ¤ íƒ€ì… (Indexed Access Types)

- íƒ€ì…ì—ì„œ íŠ¹ì • ì†ì„±ì˜ íƒ€ì…ì„ ì¶”ì¶œ.

```ts
type User = { 
  name: string;
  age: number;
};

type UserName = User["name"]; // string
type UserAge = User["age"]; // number

type UserKeys = keyof User; // "name" | "age"

type UserValues = User[keyof User]; // string | number

```

- ë°°ì—´ì˜ ê²½ìš°

```ts
const PromotionList = [
  { type: 'product', name: 'í”¼ì', price: 10000 },
  { type: 'product', name: 'ì¹˜í‚¨', price: 15000 },
  { type: 'card', name: 'í˜ë‚´!', price: 20000 },
]

type PromotionItemType = typeof PromotionList[number];

```

### 3.2.5 ë§µë“œ íƒ€ì… (Mapped Types)

- ê¸°ì¡´ íƒ€ì…ì„ ë°˜ë³µì ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ìƒˆë¡œìš´ íƒ€ì… ìƒì„±.

```ts
type User = { name: string; age: number, job: string };

type Subset<T> = {
  [K in keyof T]?: T[K];
};


const userName: Subset<User> = { name: 'John' }
const userAge: Subset<User> = { age: 20 }
const userJob: Subset<User> = { name: 'John', job: 'Developer' }
```

- `?`, `readonly`, `-` ìˆ˜ì‹ì–´ ì‚¬ìš© ê°€ëŠ¥

```ts
type ReadOnlyEx = {
  readonly a: number;
  readonly b: string;
}

type CreateMutable<Type> = {
  -readonly [Property in keyof Type]: Type[Property]; // readonly ì œê±°
}

type ResultType = CreateMutable<ReadOnlyEx>; // {a: number; b: string}
```

```ts
type OptionalEx = {
  a?: number;
  b?: boolean;
  c?: string;
}

type Concrete<Type> = {
  [Property in keyof Type]-?: Type[Property]; // optional ì œê±°
}

type ResultType = Concrete<OptionalEx>; // {a: number, b: boolean, c: string}
```

ğŸ“ ë°°ë¯¼ ì˜ˆì‹œ êµ¬ê²½í•˜ê¸°

```ts
const BottomSheetMap = {  
  RECENT_CONTACTS: RecentContactsBottomSheet,  
  CARD_SELECT: CardSelectBottomSheet,  
  SORT_FILTER: SortFilterBottomSheet,  
  PRODUCT_SELECT: ProductSelectBottomSheet,  
  REPLY_CARD_SELECT: ReplyCardSelectBottomSheet,  
  RESEND: ResendBottomSheet,  
  STICKER: StickerBottomSheet,  
  BASE: null
};

export type BOTTOM_SHEET_ID = keyof typeof BottomSheetMap;

type BottomSheetStore = { 
  RECENT_CONTACTS: { 
    resolver?: (payload: any) => void; 
    args?: any; 
    isOpened: boolean; 
  }; 
  CARD_SELECT: { 
    resolver?: (payload: any) => void; 
    args?: any; 
    isOpened: boolean; 
  }; 
  SORT_FILTER: { 
    resolver?: (payload: any) => void;
    args?: any; 
    isOpened: boolean;
  };
  // ...
};

// ì¤‘ë³µ ì¤„ì´ê¸°
type BottomSheetStore= {
  [index in BOTTOM_SHEET_ID]: {
    resolver?: (payload: any) => void;
    args?: any;
    isOpened: boolean;
  }
}
```

### 3.2.6 í…œí”Œë¦¿ ë¦¬í„°ëŸ´ íƒ€ì… (Template Literal Types)

- ë¬¸ìì—´ ì¡°í•©ìœ¼ë¡œ íƒ€ì… ìƒì„± ê°€ëŠ¥.

```ts
type Stage = 
  | "init"
  | "select-image"
  | "edit-image"
  | "decorate-card"
  | "capture-image"

type StageName = `${Stage}-stage`;
// init-stage | select-image-stage | edit-image-stage | decorate-card-stage| capture-image-stage
```

### 3.2.7 ì œë„¤ë¦­(Generic)

- íƒ€ì…ì„ í•¨ìˆ˜ì²˜ëŸ¼ ì¸ìë¡œ ë°›ì•„ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ íƒ€ì… ìƒì„±.
- í•¨ìˆ˜ì— ë§¤ê°œë³€ìˆ˜ë¥¼ ë„£ëŠ”ê²ƒê³¼ ìœ ì‚¬í•˜ê²Œ ì›í•˜ëŠ” íƒ€ì…ì„ ë„£ì–´ì¤€ë‹¤.
- íƒ€ì… ë³€ìˆ˜ëª…ìœ¼ë¡œ ìì£¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë“¤: T(Type), E(Element), K(Key), V(Value) ë“±

```ts
type ExampleArrayType<T> = T[];

const array1: ExampleArrayType<string> = ["í”¼ìë‚˜ë¼", "ì¹˜í‚¨ê³µì£¼"]
```

- ë°°ì—´ì—ì„œ ì œë„¤ë¦­
  - ë°°ì—´ ìƒì„± ì‹œì ì— íŠ¹ì • íƒ€ì…ìœ¼ë¡œ íŠ¹ì •

- ì œë„¤ë¦­ í•¨ìˆ˜ì—ì„œ í˜¸ì¶œì‹œ íƒ€ì… ì¶”ë¡ 

```ts
function exampleFunc<T>(arg: T): T[] {
  return new Array(3).fill(arg);
}

const result = exampleFunc("hello"); // T ëŠ” stringìœ¼ë¡œ ì¶”ë¡ ë¨
```

- íŠ¹ì • ìš”ì†Œì˜ íƒ€ì…ì„ ì•Œ ìˆ˜ ì—†ì„ ë•Œ ê¸°ë³¸ê°’ ì¶”ê°€

```ts
interface SubmitEvent<T = HTMLElement> extends SyntheticEvent<T> {
  submitter: T;
}

const submitEvent: SubmitEvent<HTMLFormElement> = {
  target: document.querySelector("form") as HTMLFormElement,
  submitter: document.querySelector("button") as HTMLButtonElement,
};

```

## 3.3 ì œë„¤ë¦­ ì‚¬ìš©ë²•

### 3.3.1 í•¨ìˆ˜ì˜ ì œë„¤ë¦­

```ts
function ReadOnlyRepository<T>(target: ObjectType<T> | EntitySchema<T> | string): Repository<T> {
  return getConnection("ro").getRepository(target);
}
```

### 3.3.2 í˜¸ì¶œ ì‹œê·¸ë‹ˆì²˜ì˜ ì œë„¤ë¦­

- í•¨ìˆ˜ í˜¸ì¶œì‹œ í•„ìš”í•œ íƒ€ì…ì„ ë³„ë„ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

```ts
interface useSelectPaginationProps<T> {
  categoryAtom: RecoilState<number>;
  filterAtom: RecoilState<string[]>;
  sortAtom: RecoilState<SortType>;
  fetcherFunc: (props: CommonListRequest) => Promise<DefaultResponse<ContentListResponse<T>>>;
}

function useSelectPagination<T extends CardListContent | CommonProductResponse>({
  categoryAtom,
  filterAtom,
  sortAtom,
  fetcherFunc,
}: useSelectPaginationProps<T>) {
  intersectionRef: RefObject<HTMLDivElement>;
  data: T[];
  categoryId: number;
  isLoading: boolean;
  isEmpty: boolean;
}{
  //

  return {
    intersectionRef,
    data: swappedData ?? [],
    categoryId,
    isLoading,
    isEmpty,
  }
}
```

### 3.3.3 ì œë„¤ë¦­ í´ë˜ìŠ¤

```ts
class LocalDB<T> {
  //...
  async put(table: string, row: T): Promise<T> {
    return new Promise<T>((resolve, reject) => {
      //... T íƒ€ì…ì˜ ë°ì´í„°ë¥¼ DBì— ì €ì¥
    })
  }

  async get(table: string, key: any): Promise<T> {
    return new Promise<T>((resolve, reject) => {})
  }

  async getTable(table: string): Promise<T[]> {
    return new Promise<T[]>((resolve, reject) => {})
  }

  export default class IndexedDB implements ICacheStore {  
    private _DB?: LocalDB<{ key: string; value: Promise<Record<string, unknown>>; cacheTTL: number }>;   
    
    private DB() {    
      if (!this._DB) {      
        this._DB = new LocalDB(localCache, { ver: 6, tables: [{ name: TABLE_NAME, keyPath: key }] });    
        }    
      return this._DB;  
    
    } 
    // ...
}
```

### 3.3.4 ì œí•œëœ ì œë„¤ë¦­ (extends)

- íƒ€ì… ë§¤ê°œë³€ìˆ˜ì— ëŒ€í•œ ì œì•½ ì¡°ê±´ì„ ì„¤ì •í•˜ëŠ” ê¸°ëŠ¥.

```ts
type ErrorRecord<Key extends string> = Exclude<Key, ErrorCodeType> extends never ? Partial<Record<Key, boolean>> : never;
// string íƒ€ì…ìœ¼ë¡œ ì œí•œí•˜ë ¤ë©´ íƒ€ì… ë§¤ê°œë³€ìˆ˜ëŠ” íŠ¹ì • íƒ€ì…ì„ ìƒì†(extends)í•´ì•¼ í•¨.
```

- `Key` : ë°”ìš´ë“œ íƒ€ì… ë§¤ê°œë³€ìˆ˜
- `string`: Keyì˜ ìƒí•œ í•œê³„(upper bound)

### 3.3.5 í™•ì¥ëœ ì œë„¤ë¦­

- ì œë„¤ë¦­ íƒ€ì…ë¼ë¦¬ ì¡°í•©í•˜ê±°ë‚˜ ì¤‘ì²©í•´ì„œ ë” ë³µì¡í•œ íƒ€ì… êµ¬í˜„.

```ts
export class APIResponse<Ok, Err = string> {
  private readonly data: Ok | Err | null;
  private readonly status: ResponseStatus;
  private readonly statusCode: number | null;

  constructor(
    data: Ok | Err | null,
    statusCode: number | null,
    status: ResponseStatus,
  ) {
    this.data = data;
    this.statusCode = statusCode;
    this.status = status;
  }
  
  public static Success<T, E = string>(data: T): APIResponse<T, E> {
    return new this<T, E>(data, 200, ResponseStatus.SUCCESS);
  }

  public static Error<T, E = unknown>(init: AxiosError): APIResponse<T, E> {
    if(!init.response) {
      return new this<T, E>(null, null, ResponseStatus.CLIENT_ERROR);
    }

    if(!init.response.data?.result){
      return new this<T,E>(null, init.response.status, ResponseStatus.SERVER_ERROR);
    }

    return new this<T, E>(
      init.response.data.result,
      init.response.status,
      ResponseStatus.FAILURE,
    );
  }
}

const fetchShopStatus = async (): Promise<
APIResponse<IShopResponse | null>
> => {  
  // ...  
  return (await API.get<IShopResponse | null>("/v1/main/shop", config.map(    
    (it) => it.result
  );
};

const response = await fetchShopStatus();

if(response.status === ResponseStatus.SUCCESS){
  console.log(response.data);
}
```

### 3.3.6 ì œë„¤ë¦­ ì˜ˆì‹œ (ì˜¤ìš© ì‚¬ë¡€ í¬í•¨)

- ê°€ì¥ ìœ ìš©í•œ ê²½ìš° : API ì‘ë‹µ ê°’ì˜ íƒ€ì… ì§€ì •

```ts
export interface MobileApiResponse<Data> {
  data: Data;
  statusCode: string;
  statusMessage?: string;
}
```

1. êµ³ì´ ì œë„¤ë¦­ì„ ì“°ì§€ ì•Šì•„ë„ ë˜ëŠ” ê²½ìš°:

```ts
type GType<T> = T;
type RequirementType = USE | UN_USE | NON_SELECT;
interface Order {  
  getRequirement(): GType<RequirementType>;
}

const order = new Order();
const requirement = order.getRequirement();
```

- ê·¸ëƒ¥ union íƒ€ì…ìœ¼ë¡œ ì„ ì–¸í•˜ë©´ ë¨.

```ts
type RequirementType = USE | UN_USE | NON_SELECT;
interface Order {  
  getRequirement(): RequirementType;
}
```

2. any ì‚¬ìš©í•˜ëŠ” ê²½ìš°

```ts
type ReturnType<T = any> {
  //...
}
```

3. ê°€ë…ì„±ì„ í•´ì¹˜ëŠ” ê²½ìš°

- ë„ˆë¬´ ê³¼ë„í•œ ì œë„¤ë¦­ì€ ì½ê¸° ì–´ë µê³  ìœ ì§€ë³´ìˆ˜ í˜ë“¦

```ts
ReturnType<Record<OrderType,Partial<Record<CommonOrderStatus | CommonReturnStatus, Partial<Record<OrderRoleType, string[]>>>>>>;

type CommonStatus = CommonOrderStatus | CommonReturnStatus;
type PartialOrderRole = Partial<Record<OrderRoleType, string[]>>;
type RecordCommonOrder = Record<CommonStatus, PartialOrderRole>;
type RecordOrder = Record<OrderType, Partial<RecordCommonOrder>>;
ReturnType<RecordOrder>;
```
