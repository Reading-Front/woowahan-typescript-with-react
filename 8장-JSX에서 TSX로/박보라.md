# 8장 - JSX에서 TSX로

## 8.1 리액트 컴포넌트 타입

### 클래스 컴포넌트 타입 지정

```ts
/* React Component */
interface Componet<P = {}, S = {}, SS = any>extends ComponentLifeCycle<P, S, SS>{}

class Component <P, S> {
    /* 생략 */
}

/* React Pure Component */
class PureComponent<P = {}, S = {}, SS = any> extends Component<P, S, SS> {}
```

P : Props

S : State

```ts
import React from "react";

interface WelcomeProps {
    name: string;
}

class Welcome extends React.Component<WelcomeProps> {
    /* 생략 */
}
```

### 함수 컴포넌트 타입

```ts
function Welcome(props: WelcomeProps): JSX.Element {}

const Welcome2: React.FC<WelcomeProps> = ({ name }) => {};

const Welcome3: React.VFC<WelcomeProps> = ({ name }) => {};

const Welcome4 = ({ name }: WelcomeProps): JSX.Element => {}

type FC<P = {}> = FunctionComponent<P>;

interface FunctionComponent <P = {}> {
    (props: PropsWithChildren<P>, context?: any): ReactElement<any, any> | null;
    propTypes?: WeakValidationMap<P> | undefined;
    contextTypes?: ValidationMap<any> | undefined;
    defaultProps?: Partial<P> | undefined;
    displayName?: string | undefined;
}

type VFC <P = {}> = VoidFunctionComponent<P>;

interface VoidFunctionComponent <P = {}>{
    (props: P, context?: any): ReactElement<any, any> | null;
    propTypes?: WeakValidationMap<P> | undefined;
    contextTypes?: ValidationMap<any> | undefined;
    defaultProps?: Partial<P> | undefined;
    displayName?: string | undefined;
}
```

React.FC : Function Component

React.VFC : Void Function Component (v18 이후 삭제)

### Children Props

```ts
type PropsWithChildren<P> = P & { children?: ReactNode | undefined };
```

### React.ReactElement vs JSX.Element vs React.ReactNode

모두 리액트의 요소를 나타내는 타입

#### 1. React.ReactElement

함수 컴포넌트의 반환 타입 : `ReactElement`

리액트 컴포넌트를 객체 형태로 저장하기 위한 포맷

JSX의 createElement 메서드 호출로 생성된 리액트 앨리먼트를 나타내는 타입

```ts
interface reactElement<P = any, T extends string | JSXElementConstructor<any> = string | JSXElementConstructor<any>> {
    type: T;
    props: P;
    key: Key | null;
}
```

- 사용 예시


#### 2. JSX.Element

ReactElement의 특정 타입으로 Props와 타입 필드를 모두 `<any, any>`로 가지는 타입

```ts
declare global {
    namespace JSX {
        interface Element extends React.ReactElement<any, any> {}
    }
}
```

- 사용 예시
  - 리액트 엘리먼트를 props로 전달 받는 render props 패턴 
  ```tsx
    interface Props {
      icon: JSX.Element;
    }
  
  const Item = ({ icon }: Props) => {
    // props로 받은 컴포넌트의 props에 접근할 수 있다
  const iconSize = icon.props.size;
  
  return (<li>{icon}</li>);
  }
  ```


#### 3. React.ReactNode

ReactChild : React Element | string | number

ReactNode : ReactChild | null | undefined | boolean .. 가장 넓은 범주의 타입

리액트의 render 함수가 반환할 수 있는 모든 형태

```ts
type ReactText = string | number;
type ReactChild = ReactElement | ReactText;
type ReactFragment = {} | Iterable<ReactNode>;

type ReactNode = 
    | ReactChilde
    | ReactFragment
    | ReactPortal
    | boolean
    | null
    | undefined;

type ComponentType<P = {}> = ComponentClass<P> | FunctinoComponent<P>;
```

- 사용 예시
    - 리액트가 가질 수 있는 모든 타입
    - 리액트의 Composition(합성) 모델 - props로 children를 많이 사용함
    ```ts
    interface MyComponentProps {
        children?: React.ReactNode; // <- 어떤 타입이든 children으로 들어올 수 있음을 의미
        //...
    }
    ```
    - 리액트 내장 타입인 PropsWithChildren도 `ReactNode` 타입 사용함
    ```ts
    type PropsWithChildren<P = unknown> = P & {
        children?: React.ReactNode | undefined;
    } 
    ```
  
